<!DOCTYPE html>
<script>
  function getTheListener() {
    return postMessage.bind(this, "respond", "*", undefined)
  }
  document.domain = "{{host}}";
  onmessage = function (e) {
    if (e.data == "sendclick") {
      document.body.click();
    } else {
      let expectedOrigin = "{{location[scheme]}}://{{domains[www1]}}:{{ports[http][0]}}";
      if ("{{location[scheme]}}" == "http" &&
          "{{ports[http][0]}}" == "80") {
        expectedOrigin = "{{location[scheme]}}://{{domains[www1]}}";
      }
      parent.postMessage(
        {
          actual: e.origin,
          expected: expectedOrigin,
          reason: "Incumbent should have been the caller of addEventListener()"
        },
        "*")
    };
  }
</script>
